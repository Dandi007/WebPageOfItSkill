(function(){var $$,bind,__slice=[].slice;(function(){var p,s;s=window.system={ver:"0.3.1",st:$.now(),date:window.date,path:{base:(p=window.path).base,cdn:p.cdn,ssl:p.ssl,api:p.api},location:"location-guru",url:window.location.href.toString(),timer:{},gate:{actionFollowAllowed:1},port:{},func:{},param:{},hash:{},handle:{},require:{},session:{},browser:{},debug:window.debug};s.path.short=s.debug?"/dotnet/date":s.path.cdn+"/dotnet/20130418";return window.path=window.date=null})();window.user={ver:"0.0.2",lastVer:"0.0.0.0",name:$.cookie("ac_username")||"用户",avatar:$.cookie("ac_userimg")||system.path.short+"/style/image/avatar.jpg",online:0,ban:false,uid:-1,group:-1,center:{ver:"0.0.1",theme:"default"}};window.config={ver:"0.0.4",globe:{themeEffectAllowed:1,guideFloatAllowed:1},channel:{style:"th-large"},player:{playerFloatAllowed:1},comment:{videoViewAllowed:0,autoShowCommentAllowed:1},album:{hidePlaylistAllowed:0}};window.cache={ver:"0.2.10",history:{ver:"0.0.1",views:[],comms:[],ups:[]},save:{}};$.ajaxSetup({cache:true});$$=window.$$=function(selector){var h,s;h=system.handle;if(s=selector){return h[s]||(h[s]=$(s))}else{return h}};$.salt=function(day){var c,d,r,s,_base;if(day==null){day=1}if(r=(c=(_base=$.salt).cache!=null?_base.cache:_base.cache={})[d=day]){return r}else{return c[d]="?salt="+(!(s=system).debug?(s.st/(864e5*d)|0)+s.ver.replace(/\./g,""):s.st)}};bind=function(c,a){var d,v,_i,_len,_results;_results=[];for(_i=0,_len=a.length;_i<_len;_i++){d=a[_i];v=d.split(".");if(v.length===1){_results.push(function(){var f;f=v[0];return $[f]=function(){var p;p=1<=arguments.length?__slice.call(arguments,0):[];return $.require(c,function(){return $[f].apply($,p)})}}())}else{_results.push(function(){var f;f=v[1];return $.fn[f]=function(){var e,p;p=1<=arguments.length?__slice.call(arguments,0):[];e=this;$.require(c,function(){return e[f].apply(e,p)});return e}}())}}return _results};bind("info",["info","fn.info","fn.riseInfo"]);$.i=function(){var p;p=1<=arguments.length?__slice.call(arguments,0):[];if(system.debug){return $.require("info",function(){return $.i.apply($,p)})}};$.fn.hoverInfo=function(param,callback){return this.each(function(){var c,obj;obj=$(this);return obj.off(c=".hoverInfo").on("mouseenter"+c,function(){return obj.info(param,callback)}).on("mouseleave"+c,function(){return $("#win-hint").click()})})};if(window.Worker){bind("transit",["fn.transition"])}else{$.fn.transition=function(){var p,_ref;p=1<=arguments.length?__slice.call(arguments,0):[];return(_ref=$(this)).animate.apply(_ref,p)}}$.fn.scrollOnto=function(time,callback){if(time==null){time=500}return this.eq(0).each(function(){var top;top=$(this).offset().top-64;return $("body, html").stop().animate({scrollTop:top},time,function(){return typeof callback==="function"?callback():void 0})})};$.isViewing=function(elem){var e,f;f=function(e){var pa,pb,root,ya,yb;if(e!=null?e.length:void 0){root=$(window);ya=root.scrollTop();yb=ya+root.innerHeight();pa=e.offset().top;pb=pa+e.height();if(yb>pa&&pa>ya||yb>pb&&pb>ya||pa<ya&&pb>yb){return true}else{return false}}else{return false}};switch($.type(e=elem)){case"string":return f($(e));case"object":return f(e);default:return false}};$.save=function(param,callback){return $.delay("save",200,function(){var error,func,ls,set;func={name:"$.save()"};error=function(e){return $.i(""+func.name+"#"+e)};ls=window.localStorage;set=function(c,v){return ls.setItem(c,$.parseString(v))};if(param){switch(param){case"cache":if(ls){set("cache",cache)}break;case"config":if(ls){set("config",config)}else{func.key="config";func.expires=60;func.data=$.parseString(config)}break;case"user":if(ls){set("user",user)}else{func.key="user";func.expires=14;func.data=$.parseString(user)}break;default:error(6)}if(func.key!=null){$.cookie("av."+func.key,func.data,{expires:func.expires,path:"/"})}return typeof callback==="function"?callback():void 0}else{return error(5)}})};$.fn.setup=function(param,callback){var error,func,p;func={name:"$.fn.setup",token:"mimiko",callback:callback};error=function(e){return $.i("["+func.name+"]#"+e)};switch($.type(p=param)){case"function":func.callback=p;break;case"object":$.extend(func,p)}return this.each(function(){var elem;elem=func.singer=$(this);if(!elem.data().setuped){if(elem.hasClass("dropdown")){return $.require("etc",function(){return $.fn.setup.readyDropdown(func)})}else if(elem.hasClass("tabb")){return $.fn.setup.readyTabbable(func)}else if(elem.hasClass("form")){return $.require("form",function(){return($.fn.setup.readyForm||system.func.readyForm)(func)})}else{return error(4)}}})};$.fn.setup.readyTabbable=function(func){var banner,obj,pages,tabs;if(typeof func.start==="function"){func.start()}obj=func.singer;banner=obj.children(".banner:not(.fake):first");tabs=banner.children(".tab");pages=obj.children(".page");banner.children(".tab").not(".fixed, .more, .tool").click(function(){var page,tab;tab=$(this);page=obj.children(".page:eq("+tab.index()+")");tabs.filter(".active").removeClass("active");pages.filter(".active").removeClass("active");tab.addClass("active");page.addClass("active");return typeof func.callback==="function"?func.callback():void 0});obj.data().setuped=1;return typeof func.finish==="function"?func.finish():void 0};$.check=function(param,callback){var error,func;func={name:"$.check()"};error=function(e){return $.i("["+func.name+"]#"+e)};if(param&&$.type(param)==="string"){func.type=$.trim(param);switch(func.type){case"login":case"online":user.uid=$.cookie("auth_key")|0;if(user.uid){user.online=1;user.name=$.cookie("ac_username");user.key=$.cookie("auth_key_ac_sha1");if($.cookie("ac_time")!=null){user.group=0}else{user.group=2}if(typeof callback==="function"){callback()}return true}else{user.online=0;user.group=1;user.name="游客";if(typeof callback==="function"){callback()}return false}break;case"unread":$.get("/member/unRead.aspx",{uid:user.uid}).done(function(data){user.unread={push:data.newPush,at:data.mention,mail:data.unReadMail,fan:data.newFollowed};return typeof callback==="function"?callback():void 0}).fail(function(){return error(8)});return true;default:error(7);return null}}else{error(7);return null}};bind("win",["fn.call","fn.shut","fn.unfold","curtain","fn.ensure","ensure"]);$.fn.card=function(param,callback){var c,f,p,t;f={name:"$.fn.card()",win:$$("#win-info"),direction:"auto",callback:callback};f.mainer=f.win.children("div.mainer");switch($.type(p=param)){case"string":f.direction=$.trim(p);break;case"function":f.callback=p}c=".card";t=f.win.data().timer;return this.each(function(){var obj;obj=$(this);return obj.off("mouseenter"+c).on("mouseenter"+c,function(){clearTimeout(t);return t=setTimeout(function(){return $.require("win",function(){return system.func.showCard(obj,f)})},200)}).off("mouseleave"+c).on("mouseleave"+c,function(){clearTimeout(t);return $$("#win-info").mouseleave()})})};bind("etc",["followUser","fn.readyPager","setParam"]);$.mid=function(){return Math.random().toString(36).substring(2)};$.rnd=function(){var p,r;p=1<=arguments.length?__slice.call(arguments,0):[];r=Math.random();switch(p.length){case 1:switch($.type(p[0])){case"number":return r*p[0]|0;case"array":return p[0][r*p[0].length|0]}break;case 2:return p[0]+r*(p[1]-p[0])|0;default:return r*2|0}};$.makePager=function(param){var f,i,p,_i,_j,_ref,_ref1,_ref2,_ref3;f={num:1,count:0,size:10,"long":5};if(param){$.extend(f,param)}p={total:f.totalPage||Math.ceil(f.count/f.size),num:f.num};if(p.total>1){p.fore=p.num!==1?'<span class="pager pager-fore" data-page="'+(p.num-1)+'"><i class="icon white icon-chevron-left" title="上一页">上一页</i></span>':"";p.hind=p.num!==p.total?'<span class="pager pager-hind" data-page="'+((p.num|0)+1)+'"><i class="icon white icon-chevron-right" title="下一页">下一页</i></span>':"";p.last=p.num!==p.total?'<span class="pager pager-first" data-page="'+p.total+'"><i class="icon white icon-step-forward" title="最末">最末</i></span>':"";p.first=p.num!==1?'<span class="pager pager-last" data-page="'+1+'"><i class="icon white icon-step-backward" title="最初">最初</i></span>':"";p.here='<span class="pager pager-here active" data-page="'+p.num+'">'+p.num+"</span>";p.fores="";for(i=_i=_ref=p.num-1,_ref1=p.num-f.long;_i>_ref1;i=_i+=-1){if(i>=1){p.fores='<span class="pager pager-hinds" data-page="'+i+'">'+i+"</span>"+p.fores}}p.hinds="";for(i=_j=_ref2=p.num+1,_ref3=p.num+f.long;_j<_ref3;i=_j+=1){if(i<=p.total){p.hinds+='<span class="pager pager-fores" data-page="'+i+'">'+i+"</span>"}}return p.html='<div id="'+(f.id||"")+'" class="area-pager '+(f["class"]||"")+'">'+(f.before||"")+p.first+p.fore+p.fores+p.here+p.hinds+p.hind+p.last+'<span class="hint">当前位置：'+(!f.addon?p.num:'<input class="ipt-pager" type="number" value="'+p.num+'" data-max="'+p.total+'">')+"/"+p.total+"页"+(f.addon?'<button class="btn mini btn-pager">跳页</button>':"")+"</span>"+(f.after||"")+'<span class="clearfix"></span> </div>'}else{return""}};bind("hash",["fn.hashchange","route","setHash"]);bind("flash",["fn.flash"]);window.swfobject={embedSWF:function(){var p;p=1<=arguments.length?__slice.call(arguments,0):[];return $.require("flash",function(){return swfobject.embedSWF.apply(swfobject,p)})}};bind("qrcode",["fn.qrcode"]);bind("jqueryui",["fn.draggable","fn.droppable","fn.selectable","fn.sortable"]);$.parseChannel=function(param){var a,c,list,_i,_j,_len,_len1;list=$.parseChannel.list||[];switch($.type(param)){case"number":for(_i=0,_len=list.length;_i<_len;_i++){a=list[_i];if(!(a[0]===param)){continue}c=a[1];break}return c||"未知频道";case"string":for(_j=0,_len1=list.length;_j<_len1;_j++){a=list[_j];if(!(a[1]===param)){continue}c=a[0];break}return c||1;default:return"未知频道"}};$.parseColor=function(string){var c,i,l,p,_i,_j;switch($.type(p=string)){case"string":l=p.length;c=[p.charCodeAt(0),p.charCodeAt(l*.5|0),p.charCodeAt(l-1)];for(i=_i=0;_i<=2;i=++_i){c[i]=c[i].toString();c[i]=c[i].substr(c[i].length-2)*2.55|0}if(c[1]>127){c[1]=255-c[1]}for(i=_j=0;_j<=2;i=++_j){c[i]=c[i].toString(16);if(c[i].length<2){c[i]="0"+c[i]}}return"#"+c.join("");default:return"#333333"}};$.parseGet=function(param){var func;func={name:"$.parseGet()"};if(param){switch($.type(param)){case"string":func.text=param;break;case"object":$.extend(func,param);func.name="$.parseGet()"}func.text=func.text.search(/(?:\[[^\]]*?\[)|(?:\][^\[]*?\])/)===-1?func.text:func.text.replace(/\[.*?\]/g,"").replace(/\[|\]/g,"");func.text=func.text.replace(/&nbsp;/g," ").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/(?:&lt;|&gt;)/g,"").replace(/&lt;br\/&gt;/g,"").replace(/<br\s?\/?>/g,"").replace(/\r/g,"\n").replace(/\n{2,}/g,"\n");if(func.text.search(/\n+/)!==-1){func.text.replace(/\n+/,"")}if(window.ubb2html){func.text=window.ubb2html(func.text)}else{$.i("["+func.name+"]#3")}func.text=func.text.replace(/\[ac\=(\S+?)\](\S+?)\[\/ac\]/g,'<a class="ac title btn" data-aid="$1" href="/v/ac$1" target="_blank"><i class="icon icon-play-circle"></i>$2</a>').replace(/\[aa\=(\S+?)\](\S+?)\[\/aa\]/g,'<a class="aa btn" href="/a/aa$1" target="_blank" title="该链接通向AcFun合辑"><i class="icon icon-list"></i>$2</a>').replace(/\[sm\=(\S+?)\](\S+?)\[\/sm\]/g,'<a class="sm btn" href="http://www.nicovideo.jp/watch/sm$1" target="_blank" title="该链接通向ニコニコ动画"><i class="icon icon-film"></i>$2</a>').replace(/\[email\](\S+?)\[\/email\]/g,'<a class="email btn" href="mailto:$1" target="_blank" title="点击以发送邮件"><i class="icon icon-envelope"></i>$1</a>').replace(/\[wiki\=(\S+?)\](\S+?)\[\/wiki\]/g,'<a class="wiki btn" href="http://wiki.acfun.tv/index.php/$1" target="_blank" title="该链接通向AC百科"><i class="icon icon-tag"></i>$2</a>').replace(/\[emot\=(\S+?)\,(\S+?)\/\]/g,'<img class="emotion" src="'+system.path.short+'/umeditor/dialogs/emotion/images/$1/$2.gif">');if(!func.showImage){func.text=func.text.replace(/\[img\](\S+?)\[\/img\]/g,'<a class="btn btn-img" href="$1" target="_blank" title="点击以浏览图像"><i class="icon icon-picture"></i>图像</a>').replace(/\[img\=(\S+?)\](\S+?)\[\/img\]/g,'<a class="btn btn-img" href="$2" target="_blank" title="$1"><i class="icon icon-picture"></i>$1</a>')}else{func.text=func.text.replace(/\[img\](\S+?)\[\/img\]/g,'<a class="thumb" href="$1" target="_blank" title="点击以浏览图像"><img class="preview" src="$1"></a>').replace(/\[img\=(\S+?)\](\S+?)\[\/img\]/g,'<a class="thumb" href="$2" target="_blank" title="$1"><img class="preview" src="$2"></a>')}func.text=func.text.replace(/\[at\]([\s\S]+?)\[\/at\]/g,'<a class="name" target="_blank"href="/member/findUser.aspx?userName=$1">@$1</a>').replace(/\[\/?back.*?\]/g,"").replace(/\[username\]([\s\S]+?)\[\/username\]/g,'<a  class="name" target="_blank" href="/member/findUser.aspx?userName=$1">$1</a>').replace(/\[.*?\]/g,"").replace(/([\s\W\_])on\w+?\s*?\=/g,"$1data-event=");return $.trim(func.text)}else{return""}};$.parseJson=function(data){var d,f;f=function(p){var e;try{return $.parseJSON(p)}catch(_error){e=_error;return null}};switch($.type(d=data)){case"string":return f(d);case"object":return d;default:return null}};$.parsePost=function(param){var a,arr,b,fs,func,list,mails,r,_i,_j,_k,_len,_len1,_len2,_ref;func={name:"$.parsePost()",text:""};if(param){switch($.type(param)){case"string":case"number":func.text=param;break;default:$.i("["+func.name+"]#7")}}if((_ref=func.text)!=null?_ref.length:void 0){func.text="[mimiko]"+func.text.replace(/<span\sstyle="text\-decoration\:underline;">([\s\S]+?)<\/span>/g,"[u]$1[/u]").replace(/<span\sstyle="text\-decoration:line\-through;">([\s\S]+?)<\/span>/g,"[s]$1[/s]").replace(/<img[^>]*?src="[^>]*?\/um?editor\/dialogs\/emotion\/images\/(\w+?)\/(\d+?)\.gif".*?>/g,"[emot=$1,$2/]");mails=func.text.match(/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/g);if(mails!=null?mails.length:void 0){func.text=func.text.replace(/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/g,"[mimiko-mail-mark]")}if(window.html2ubb){func.text=window.html2ubb(func.text)}else{$.i("["+func.name+"]#3")}func.text=func.text.replace(/<br\s?\/?>/g,"").replace(/(http:\/\/.*?\.(?:jpg|jpeg|png|gif))(?!\[)/g,"[img]$1[/img]").replace(/\[url\](.*?\.(?:jpg|jpeg|png|gif))\[\/url\]/g,"[img]$1[/img]").replace(/\[url\]\[img\](.*?)\[\/img\]\[\/url\]/g,"[img]$1[/img]").replace(/@([^\s<>\[\]\(\)\{\}]{2,20})/g,"[at]$1[/at]").replace(/\[ac(\d+?)\]/g,"[ac=$1]ac$1[/ac]").replace(/([^\w=\[\]\/])ac(\d+)/g,"$1[ac=$2]ac$2[/ac]").replace(/\[aa(\d+?)\]/g,"[aa=$1]ac$1[/aa]").replace(/([^\w=\[\]\/])aa(\d+)/g,"$1[aa=$2]aa$2[/aa]").replace(/\[sm(\d+?)\]/g,"[sm=$1]sm$1[/sm]").replace(/([^\w=\[\]\/])sm(\d+)/g,"$1[sm=$2]sm$2[/sm]").replace(/\[wiki([\s\S]+?)\]/g,"[wiki=$1]$1[/wiki]").replace(/\[mimiko\]/g,"");if(mails!=null?mails.length:void 0){for(_i=0,_len=mails.length;_i<_len;_i++){a=mails[_i];func.text=func.text.replace(/\[mimiko\-mail\-mark\]/,"[email]"+a+"[/email]")}}fs=func.text.match(/\[size.*?\]/g);if(fs!=null?fs.length:void 0){func.text=func.text.replace(/\[size.*?\]/g,"[mimiko-fontsize-mark]");list=[10,12,16,18,24,32,48];for(_j=0,_len1=fs.length;_j<_len1;_j++){a=fs[_j];b=a.match(/\d+/)[0]|0;if($.inArray(b,list)<0){a="[size=14px]"}func.text=func.text.replace(/\[mimiko\-fontsize\-mark\]/,a)}}}func.text=func.text.replace(/\[img\].+\/um?editor\/dialogs\/emotion\/images\/(\w+?)\/(\d+?)\.gif\[\/img\]/g,"[emot=$1,$2/]");list=["b","i","u","s","color"];for(_k=0,_len2=list.length;_k<_len2;_k++){a=list[_k];r=new RegExp("\\["+a,"ig");arr=func.text.match(r);if(arr!=null?arr.length:void 0){r=new RegExp("\\[\\/"+a,"ig");b=func.text.match(r);if(!b||arr.length!==b.length){func.text=func.text.replace(/\[.*?\]/g,"")}}}if(func.text.search(/\[[^\]]+\[/)>=0||func.text.search(/\][^\[]+\]/)>=0){$.info("error::["+func.name+"]#7");func.text=func.text.replace(/\[.*?\]/g,"")}return $.trim(func.text)};$.parsePts=function(number){var n;if((n=(number||0)|0)>=1e5){return(n*.001|0)/10+"万"}else{return n.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}};$.parseSafe=function(text){var t;if(t=text){t=t.toString().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&nbsp;/g,"");if(!$$()["#item-safe-parse"]){$$("#stage").append('<div id="item-safe-parse" class="hidden"></div>')}return t=$$("#item-safe-parse").text(t).html()}else{return""}};$.parseString=function(data){var d;switch($.type(d=data)){case"object":return JSON.stringify(d);case"array":return JSON.stringify({_obj:d}).replace(/\{(.*)\}/,"$1").replace(/"_obj":/,"");case"undefined":return null;default:return $.trim(d.toString())}};$.parseTime=function(param){var trans;trans=function(t){var dayAgo,dt,dtNow,hrAgo,hrMin,longAgo,longLongAgo,minAgo,secAgo,ts,tsDistance,tsNow;dt=new Date(t);ts=dt.getTime();dtNow=new Date;tsNow=dtNow.getTime();tsDistance=tsNow-ts;hrMin=dt.getHours()+"时"+(dt.getMinutes()<10?"0":"")+dt.getMinutes()+"分";longAgo=dt.getMonth()+1+"月"+dt.getDate()+"日(星期"+["日","一","二","三","四","五","六"][dt.getDay()]+") "+hrMin;longLongAgo=dt.getFullYear()+"年"+longAgo;if(tsDistance<0){return"刚刚"}else{if(tsDistance/1e3/60/60/24/365|0>0){return longLongAgo}else{if((dayAgo=tsDistance/1e3/60/60/24)>3){if(dt.getFullYear()!==dtNow.getFullYear()){return longLongAgo}else{return longAgo}}else{if((dayAgo=(dtNow.getDay()-dt.getDay()+7)%7)>2){return longAgo}else{if(dayAgo>1){return"前天 "+hrMin}else{if((hrAgo=tsDistance/1e3/60/60)>12){return(dt.getDay()!==dtNow.getDay()?"昨天 ":"今天 ")+hrMin}else{if((hrAgo=tsDistance/1e3/60/60%60|0)>0){return hrAgo+"小时前"}else{if((minAgo=tsDistance/1e3/60%60|0)>0){return minAgo+"分钟前"}else{if((secAgo=tsDistance/1e3%60|0)>0){return secAgo+"秒前"}else{return"刚刚"}}}}}}}}}};return trans($.timeStamp(param))};$.parseTemp=function(string,object){var k,s,v;s=string;for(k in object){v=object[k];s=s.replace(new RegExp("\\["+k+"\\]","g"),v)}return s};$.timeStamp=function(param){var a,b,c,d,i,p,text,_i;switch($.type(p=param)){case"number":return p;case"string":text=$.trim(p);if(text.search(/[\s\.\-\/]/)!==-1){if(text.search(/\:/)!==-1){a=text.split(" ");if(a[0].search(/\:/)===-1){b=a[0].replace(/[\-\/]/g,".").split(".");c=a[1].split(":")}else{b=a[1].replace(/[\-\/]/g,".").split(".");c=a[0].split(":")}}else{b=text.replace(/[\-\/]/g,".").split(".");c=[0,0,0]}for(i=_i=0;_i<=2;i=++_i){b[i]=b[i]|0;c[i]=(c[i]||0)|0}d=new Date;d.setFullYear(b[0],b[1]-1,b[2]);d.setHours(c[0],c[1],c[2]);return d.getTime()}else{return $.now()}break;default:return $.now()}};$.fn.loadin=function(){return this.each(function(){return $(this).attr({src:$(this).data().src})})};$.preload=function(param,callback){var arr,next,p;next=function(){var i,l,loader,mid;$$("#stage").append('<img id="preloader-'+(mid=$.mid())+'" class="hidden">');loader=$("#preloader-"+mid);l=function(src){var check;check=function(){if(i<arr.length){return l(arr[i])}else{loader.remove();return typeof callback==="function"?callback():void 0}};if(src.toLowerCase().search(/png|jpg|gif|jepg/)!==-1){return loader.off().one("load",function(){i++;return setTimeout(check,20)}).one("error",function(){return loader.load()}).attr({src:src})}else{i++;return check()}};return l(arr[i=0])};switch($.type(p=param)){case"string":arr=[p];return next();case"array":arr=p;return next();default:return typeof callback==="function"?callback():void 0}};$.delay=function(){var c,error,f,func,now,param,_base,_base1,_name;param=1<=arguments.length?__slice.call(arguments,0):[];func={name:"$.delay()",delay:200};error=function(e){return $.i("["+func.name+"]#"+e)};if(param){switch(param.length){case 1:$.extend(func,param[0]);func.name="$.fn.info()";break;case 2:func.id=param[0].toString();func.callback=param[1];break;case 3:func.id=param[0].toString();func.delay=param[1]|0;func.callback=param[2];break;default:error(7)}if(func.id&&func.delay>=0&&func.callback){if((_base=c=(_base1=$.delay).cache!=null?_base1.cache:_base1.cache={})[_name=func.id]==null){_base[_name]={time:0,timer:null}}now=$.now();f=function(){c[func.id].time=now;return typeof func.callback==="function"?func.callback():void 0};if(now-c[func.id].time>func.delay){return f()}else{clearTimeout(c[func.id].timer);return c[func.id].timer=setTimeout(f,func.delay)}}else{return error(7)}}else{return error(5)}};$.require=function(p,c){var error,fix,func,id,r,salt,_base;func={name:"$.require()"};error=function(e){return $.i("["+func.name+"]#"+e)};fix=[(system.debug?".js":".min.js")+(salt=$.salt()),".css"+salt];r=(_base=$.require).cache!=null?_base.cache:_base.cache={};bind=function(t,s){var url;if(r[t]){return typeof c==="function"?c():void 0}else{url=s?system.path.short+"/script/"+s+".js":system.path.short+"/script/require/"+t+fix[0];return $.getScript(url,function(){r[t]=1;return typeof c==="function"?c():void 0})}};switch(p){case"comm":if(r.comm){return typeof c==="function"?c():void 0}else{id="style-require-comm";if(!$("#"+id).length){$$("head").append('<link id="'+id+'" href="'+system.path.short+"/project/homura/style/comm"+fix[1]+'" rel="stylesheet">')}return $.getScript(system.path.short+"/project/homura/script/comm"+fix[0],function(){r.comm=1;return typeof c==="function"?c():void 0})}break;case"qrcode":return bind("qrcode","jquery.qrcode.min");case"jqueryui":return bind("jqueryui","jquery.ui.min");case"transit":return bind("transit","jquery.transit.min");case"editor":if(r.editor){return typeof c==="function"?c():void 0}else{id="style-require-editor";if(!$("#"+id).length){$$("head").append('<link id="'+id+'" href="'+system.path.short+'/umeditor/themes/ac/css/umeditor.css" rel="stylesheet">')}return $.getScript(system.path.short+"/umeditor/umeditor.config.min.js",function(){return $.getScript(system.path.short+"/umeditor/umeditor.min.js",function(){r.editor=1;return typeof c==="function"?c():void 0})})}break;case"ready":if(r.ready){return typeof c==="function"?c():void 0}else{return system.func.ready(function(){r.ready=1;return typeof c==="function"?c():void 0})}break;default:return bind(p)}}}).call(this);